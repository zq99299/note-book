<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>如何用 Elasticsearch 构建商品搜索系统？ | MRCODE-BOOK</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/note-book/favicon.ico">
    <link rel="manifest" href="/note-book/manifest.json">
    <meta name="description" content="用来记录工作和学习过程中的笔记，汇总成册方便查阅，类容涵盖各类技术，如：Java、Git、ElasticSearch、MyCat、设计模式、Gradle、Vue - mrcode.cn">
    
    <link rel="preload" href="/note-book/assets/css/0.styles.f6819672.css" as="style"><link rel="preload" href="/note-book/assets/js/app.ef31f24d.js" as="script"><link rel="preload" href="/note-book/assets/js/7.a393a8e7.js" as="script"><link rel="preload" href="/note-book/assets/js/51.386949ba.js" as="script"><link rel="preload" href="/note-book/assets/js/104.308420f7.js" as="script"><link rel="prefetch" href="/note-book/assets/js/10.7ca034ad.js"><link rel="prefetch" href="/note-book/assets/js/100.51f8b719.js"><link rel="prefetch" href="/note-book/assets/js/101.b597141f.js"><link rel="prefetch" href="/note-book/assets/js/102.086c80c4.js"><link rel="prefetch" href="/note-book/assets/js/103.07612db4.js"><link rel="prefetch" href="/note-book/assets/js/105.86969be3.js"><link rel="prefetch" href="/note-book/assets/js/106.543f2fa8.js"><link rel="prefetch" href="/note-book/assets/js/107.908ed58f.js"><link rel="prefetch" href="/note-book/assets/js/108.34b0254f.js"><link rel="prefetch" href="/note-book/assets/js/109.4f531c10.js"><link rel="prefetch" href="/note-book/assets/js/11.b7c05c95.js"><link rel="prefetch" href="/note-book/assets/js/110.ef5e3380.js"><link rel="prefetch" href="/note-book/assets/js/111.37a59580.js"><link rel="prefetch" href="/note-book/assets/js/112.5db842d8.js"><link rel="prefetch" href="/note-book/assets/js/113.8817d723.js"><link rel="prefetch" href="/note-book/assets/js/114.0bd52dab.js"><link rel="prefetch" href="/note-book/assets/js/115.4bb2150f.js"><link rel="prefetch" href="/note-book/assets/js/116.4b6fd5f9.js"><link rel="prefetch" href="/note-book/assets/js/117.121d548c.js"><link rel="prefetch" href="/note-book/assets/js/118.230d221b.js"><link rel="prefetch" href="/note-book/assets/js/119.9a79eac0.js"><link rel="prefetch" href="/note-book/assets/js/12.d9b30932.js"><link rel="prefetch" href="/note-book/assets/js/120.c84a7469.js"><link rel="prefetch" href="/note-book/assets/js/121.cd9f77f4.js"><link rel="prefetch" href="/note-book/assets/js/122.ee66af06.js"><link rel="prefetch" href="/note-book/assets/js/123.fff5270f.js"><link rel="prefetch" href="/note-book/assets/js/124.4e015e60.js"><link rel="prefetch" href="/note-book/assets/js/125.43b5afc8.js"><link rel="prefetch" href="/note-book/assets/js/126.7483dace.js"><link rel="prefetch" href="/note-book/assets/js/127.98c59d23.js"><link rel="prefetch" href="/note-book/assets/js/128.7057ba06.js"><link rel="prefetch" href="/note-book/assets/js/129.1425e664.js"><link rel="prefetch" href="/note-book/assets/js/13.e6fbfdb3.js"><link rel="prefetch" href="/note-book/assets/js/130.1f4ab63e.js"><link rel="prefetch" href="/note-book/assets/js/131.753e8dee.js"><link rel="prefetch" href="/note-book/assets/js/132.0ba5f6f5.js"><link rel="prefetch" href="/note-book/assets/js/133.0da78d5e.js"><link rel="prefetch" href="/note-book/assets/js/134.b9ec9d26.js"><link rel="prefetch" href="/note-book/assets/js/135.92bae297.js"><link rel="prefetch" href="/note-book/assets/js/136.e13ee0b9.js"><link rel="prefetch" href="/note-book/assets/js/137.6287148a.js"><link rel="prefetch" href="/note-book/assets/js/138.58610537.js"><link rel="prefetch" href="/note-book/assets/js/139.48ee347e.js"><link rel="prefetch" href="/note-book/assets/js/14.fb80862f.js"><link rel="prefetch" href="/note-book/assets/js/140.8b42805a.js"><link rel="prefetch" href="/note-book/assets/js/141.42e90d6d.js"><link rel="prefetch" href="/note-book/assets/js/142.03dbad4d.js"><link rel="prefetch" href="/note-book/assets/js/143.358b8aa1.js"><link rel="prefetch" href="/note-book/assets/js/144.fc440336.js"><link rel="prefetch" href="/note-book/assets/js/145.17334102.js"><link rel="prefetch" href="/note-book/assets/js/146.7f9745cd.js"><link rel="prefetch" href="/note-book/assets/js/147.7fd42b2f.js"><link rel="prefetch" href="/note-book/assets/js/148.7e044fb9.js"><link rel="prefetch" href="/note-book/assets/js/149.fd69d02b.js"><link rel="prefetch" href="/note-book/assets/js/15.ac02f6fe.js"><link rel="prefetch" href="/note-book/assets/js/150.f7790328.js"><link rel="prefetch" href="/note-book/assets/js/151.42ed92f9.js"><link rel="prefetch" href="/note-book/assets/js/152.9b1f933f.js"><link rel="prefetch" href="/note-book/assets/js/153.c036c6b1.js"><link rel="prefetch" href="/note-book/assets/js/154.f632a98a.js"><link rel="prefetch" href="/note-book/assets/js/155.ee60c3ff.js"><link rel="prefetch" href="/note-book/assets/js/156.6aee31e0.js"><link rel="prefetch" href="/note-book/assets/js/157.efdb7e45.js"><link rel="prefetch" href="/note-book/assets/js/158.cb08dad0.js"><link rel="prefetch" href="/note-book/assets/js/159.8bd79ff7.js"><link rel="prefetch" href="/note-book/assets/js/16.27225aca.js"><link rel="prefetch" href="/note-book/assets/js/160.1ed04a51.js"><link rel="prefetch" href="/note-book/assets/js/161.1d08b495.js"><link rel="prefetch" href="/note-book/assets/js/162.39b53109.js"><link rel="prefetch" href="/note-book/assets/js/163.83942d62.js"><link rel="prefetch" href="/note-book/assets/js/164.38e26692.js"><link rel="prefetch" href="/note-book/assets/js/165.d63f011b.js"><link rel="prefetch" href="/note-book/assets/js/166.4fbe7e75.js"><link rel="prefetch" href="/note-book/assets/js/167.c1b42356.js"><link rel="prefetch" href="/note-book/assets/js/168.80153868.js"><link rel="prefetch" href="/note-book/assets/js/169.42c77035.js"><link rel="prefetch" href="/note-book/assets/js/17.bda9bae7.js"><link rel="prefetch" href="/note-book/assets/js/170.75fe9cc8.js"><link rel="prefetch" href="/note-book/assets/js/171.560b9429.js"><link rel="prefetch" href="/note-book/assets/js/172.3448b04c.js"><link rel="prefetch" href="/note-book/assets/js/173.0bc21520.js"><link rel="prefetch" href="/note-book/assets/js/174.341fe0c3.js"><link rel="prefetch" href="/note-book/assets/js/175.1566616c.js"><link rel="prefetch" href="/note-book/assets/js/176.08f74f8a.js"><link rel="prefetch" href="/note-book/assets/js/177.7872456b.js"><link rel="prefetch" href="/note-book/assets/js/178.7d9ee7a8.js"><link rel="prefetch" href="/note-book/assets/js/179.2be09c6d.js"><link rel="prefetch" href="/note-book/assets/js/18.5bba52b1.js"><link rel="prefetch" href="/note-book/assets/js/180.1a0a24ef.js"><link rel="prefetch" href="/note-book/assets/js/181.2551a4de.js"><link rel="prefetch" href="/note-book/assets/js/182.0ddbc93f.js"><link rel="prefetch" href="/note-book/assets/js/183.a1793359.js"><link rel="prefetch" href="/note-book/assets/js/184.cc498972.js"><link rel="prefetch" href="/note-book/assets/js/185.2d130eb0.js"><link rel="prefetch" href="/note-book/assets/js/186.f6602e37.js"><link rel="prefetch" href="/note-book/assets/js/187.e6ddd17e.js"><link rel="prefetch" href="/note-book/assets/js/188.b7f8a873.js"><link rel="prefetch" href="/note-book/assets/js/189.426711e6.js"><link rel="prefetch" href="/note-book/assets/js/19.2930f0ce.js"><link rel="prefetch" href="/note-book/assets/js/190.c95e50b3.js"><link rel="prefetch" href="/note-book/assets/js/191.e1bb5971.js"><link rel="prefetch" href="/note-book/assets/js/192.700aaf71.js"><link rel="prefetch" href="/note-book/assets/js/193.fea1a48a.js"><link rel="prefetch" href="/note-book/assets/js/194.82a59832.js"><link rel="prefetch" href="/note-book/assets/js/195.5d301282.js"><link rel="prefetch" href="/note-book/assets/js/196.731f5d62.js"><link rel="prefetch" href="/note-book/assets/js/197.3da6dde3.js"><link rel="prefetch" href="/note-book/assets/js/198.474b639a.js"><link rel="prefetch" href="/note-book/assets/js/199.a873de21.js"><link rel="prefetch" href="/note-book/assets/js/2.4ce0a09c.js"><link rel="prefetch" href="/note-book/assets/js/20.43c429d0.js"><link rel="prefetch" href="/note-book/assets/js/200.4521852f.js"><link rel="prefetch" href="/note-book/assets/js/201.713eaa55.js"><link rel="prefetch" href="/note-book/assets/js/202.e1bee06f.js"><link rel="prefetch" href="/note-book/assets/js/203.c4bf7d7c.js"><link rel="prefetch" href="/note-book/assets/js/204.da9529ff.js"><link rel="prefetch" href="/note-book/assets/js/205.ea6bcdad.js"><link rel="prefetch" href="/note-book/assets/js/206.95d8b016.js"><link rel="prefetch" href="/note-book/assets/js/207.4b514714.js"><link rel="prefetch" href="/note-book/assets/js/208.3613a40b.js"><link rel="prefetch" href="/note-book/assets/js/209.8bf6705f.js"><link rel="prefetch" href="/note-book/assets/js/21.79e3e831.js"><link rel="prefetch" href="/note-book/assets/js/210.dd9316a6.js"><link rel="prefetch" href="/note-book/assets/js/211.64212636.js"><link rel="prefetch" href="/note-book/assets/js/212.817e11bf.js"><link rel="prefetch" href="/note-book/assets/js/213.22ba5d52.js"><link rel="prefetch" href="/note-book/assets/js/214.a4f9a696.js"><link rel="prefetch" href="/note-book/assets/js/215.264e1264.js"><link rel="prefetch" href="/note-book/assets/js/216.b78255a0.js"><link rel="prefetch" href="/note-book/assets/js/217.c846b105.js"><link rel="prefetch" href="/note-book/assets/js/218.499ba6c9.js"><link rel="prefetch" href="/note-book/assets/js/219.fadd595c.js"><link rel="prefetch" href="/note-book/assets/js/22.c9328aeb.js"><link rel="prefetch" href="/note-book/assets/js/220.6f5f5fd2.js"><link rel="prefetch" href="/note-book/assets/js/221.bcc4cf2e.js"><link rel="prefetch" href="/note-book/assets/js/222.0f3edb22.js"><link rel="prefetch" href="/note-book/assets/js/223.8a141b30.js"><link rel="prefetch" href="/note-book/assets/js/224.84f7b3a0.js"><link rel="prefetch" href="/note-book/assets/js/225.3cb0e9ad.js"><link rel="prefetch" href="/note-book/assets/js/226.13435efe.js"><link rel="prefetch" href="/note-book/assets/js/227.8b5e707c.js"><link rel="prefetch" href="/note-book/assets/js/228.d92393dc.js"><link rel="prefetch" href="/note-book/assets/js/229.8536d06e.js"><link rel="prefetch" href="/note-book/assets/js/23.889b2269.js"><link rel="prefetch" href="/note-book/assets/js/230.2634ed59.js"><link rel="prefetch" href="/note-book/assets/js/231.c2d1c0f4.js"><link rel="prefetch" href="/note-book/assets/js/232.873fa356.js"><link rel="prefetch" href="/note-book/assets/js/233.4e1b4585.js"><link rel="prefetch" href="/note-book/assets/js/234.b3df1833.js"><link rel="prefetch" href="/note-book/assets/js/235.5df24a1a.js"><link rel="prefetch" href="/note-book/assets/js/236.817017c2.js"><link rel="prefetch" href="/note-book/assets/js/237.6d7f2e81.js"><link rel="prefetch" href="/note-book/assets/js/238.2397451a.js"><link rel="prefetch" href="/note-book/assets/js/239.e2147f3c.js"><link rel="prefetch" href="/note-book/assets/js/24.5cca0b46.js"><link rel="prefetch" href="/note-book/assets/js/240.48d1ed85.js"><link rel="prefetch" href="/note-book/assets/js/241.b7940ebf.js"><link rel="prefetch" href="/note-book/assets/js/242.0c859b33.js"><link rel="prefetch" href="/note-book/assets/js/243.c80dffc7.js"><link rel="prefetch" href="/note-book/assets/js/244.9b3eeb42.js"><link rel="prefetch" href="/note-book/assets/js/245.87038f0c.js"><link rel="prefetch" href="/note-book/assets/js/246.9d838404.js"><link rel="prefetch" href="/note-book/assets/js/247.bd1caea4.js"><link rel="prefetch" href="/note-book/assets/js/248.84fa24fc.js"><link rel="prefetch" href="/note-book/assets/js/249.0e8a3f4d.js"><link rel="prefetch" href="/note-book/assets/js/25.ae3041bd.js"><link rel="prefetch" href="/note-book/assets/js/250.972c7a8b.js"><link rel="prefetch" href="/note-book/assets/js/251.adbb697c.js"><link rel="prefetch" href="/note-book/assets/js/252.44bdab5c.js"><link rel="prefetch" href="/note-book/assets/js/253.0f760424.js"><link rel="prefetch" href="/note-book/assets/js/254.781cd75a.js"><link rel="prefetch" href="/note-book/assets/js/255.fbd9c42c.js"><link rel="prefetch" href="/note-book/assets/js/256.9468baee.js"><link rel="prefetch" href="/note-book/assets/js/257.56afef91.js"><link rel="prefetch" href="/note-book/assets/js/258.64cfbc92.js"><link rel="prefetch" href="/note-book/assets/js/259.dcbd8661.js"><link rel="prefetch" href="/note-book/assets/js/26.11f97d82.js"><link rel="prefetch" href="/note-book/assets/js/260.f8de8ea4.js"><link rel="prefetch" href="/note-book/assets/js/261.bb9f0850.js"><link rel="prefetch" href="/note-book/assets/js/262.88bf0cbe.js"><link rel="prefetch" href="/note-book/assets/js/263.c287862f.js"><link rel="prefetch" href="/note-book/assets/js/264.775fb23f.js"><link rel="prefetch" href="/note-book/assets/js/265.0cd43f5a.js"><link rel="prefetch" href="/note-book/assets/js/266.dc11da64.js"><link rel="prefetch" href="/note-book/assets/js/267.fbd47d78.js"><link rel="prefetch" href="/note-book/assets/js/268.6c706cbb.js"><link rel="prefetch" href="/note-book/assets/js/269.979d7af4.js"><link rel="prefetch" href="/note-book/assets/js/27.1b311eee.js"><link rel="prefetch" href="/note-book/assets/js/270.2f423f67.js"><link rel="prefetch" href="/note-book/assets/js/271.ec2c291d.js"><link rel="prefetch" href="/note-book/assets/js/272.f5536e27.js"><link rel="prefetch" href="/note-book/assets/js/273.e0555882.js"><link rel="prefetch" href="/note-book/assets/js/274.94c8a9a3.js"><link rel="prefetch" href="/note-book/assets/js/275.47074748.js"><link rel="prefetch" href="/note-book/assets/js/276.c2e3a54d.js"><link rel="prefetch" href="/note-book/assets/js/277.e5c2f2d1.js"><link rel="prefetch" href="/note-book/assets/js/278.2bb294f6.js"><link rel="prefetch" href="/note-book/assets/js/279.b4125f51.js"><link rel="prefetch" href="/note-book/assets/js/28.fe2ef15f.js"><link rel="prefetch" href="/note-book/assets/js/280.4755b703.js"><link rel="prefetch" href="/note-book/assets/js/281.ad8837eb.js"><link rel="prefetch" href="/note-book/assets/js/282.9f4e8bc6.js"><link rel="prefetch" href="/note-book/assets/js/283.fb27d38e.js"><link rel="prefetch" href="/note-book/assets/js/284.afbe60b4.js"><link rel="prefetch" href="/note-book/assets/js/285.77a6a9c6.js"><link rel="prefetch" href="/note-book/assets/js/286.c75dac5e.js"><link rel="prefetch" href="/note-book/assets/js/287.428c2333.js"><link rel="prefetch" href="/note-book/assets/js/288.ebe9d950.js"><link rel="prefetch" href="/note-book/assets/js/289.45e39a2a.js"><link rel="prefetch" href="/note-book/assets/js/29.81d5c958.js"><link rel="prefetch" href="/note-book/assets/js/290.19e91e68.js"><link rel="prefetch" href="/note-book/assets/js/291.73ad538d.js"><link rel="prefetch" href="/note-book/assets/js/292.d5e37c4a.js"><link rel="prefetch" href="/note-book/assets/js/293.0ecaa2cb.js"><link rel="prefetch" href="/note-book/assets/js/294.6ea52e70.js"><link rel="prefetch" href="/note-book/assets/js/295.25892a21.js"><link rel="prefetch" href="/note-book/assets/js/296.47c29746.js"><link rel="prefetch" href="/note-book/assets/js/297.d9f4d02e.js"><link rel="prefetch" href="/note-book/assets/js/298.9a5366d9.js"><link rel="prefetch" href="/note-book/assets/js/299.4f7acb32.js"><link rel="prefetch" href="/note-book/assets/js/3.8311dd12.js"><link rel="prefetch" href="/note-book/assets/js/30.9b4a2389.js"><link rel="prefetch" href="/note-book/assets/js/300.63b203e6.js"><link rel="prefetch" href="/note-book/assets/js/301.2472747c.js"><link rel="prefetch" href="/note-book/assets/js/302.cfd0d046.js"><link rel="prefetch" href="/note-book/assets/js/303.1582ff33.js"><link rel="prefetch" href="/note-book/assets/js/304.cabfe459.js"><link rel="prefetch" href="/note-book/assets/js/305.fcff8944.js"><link rel="prefetch" href="/note-book/assets/js/306.40fe5467.js"><link rel="prefetch" href="/note-book/assets/js/307.bd5088d2.js"><link rel="prefetch" href="/note-book/assets/js/308.9d6443f2.js"><link rel="prefetch" href="/note-book/assets/js/309.a71b3e9e.js"><link rel="prefetch" href="/note-book/assets/js/31.ab0ea104.js"><link rel="prefetch" href="/note-book/assets/js/310.4f9473c5.js"><link rel="prefetch" href="/note-book/assets/js/311.7c581e40.js"><link rel="prefetch" href="/note-book/assets/js/312.f6a3f0d8.js"><link rel="prefetch" href="/note-book/assets/js/313.381daed3.js"><link rel="prefetch" href="/note-book/assets/js/314.9f601b23.js"><link rel="prefetch" href="/note-book/assets/js/315.e919cc5b.js"><link rel="prefetch" href="/note-book/assets/js/316.821daaa3.js"><link rel="prefetch" href="/note-book/assets/js/317.7510084a.js"><link rel="prefetch" href="/note-book/assets/js/318.eadf1ff7.js"><link rel="prefetch" href="/note-book/assets/js/319.8b3fde0a.js"><link rel="prefetch" href="/note-book/assets/js/32.14d51ff2.js"><link rel="prefetch" href="/note-book/assets/js/320.473a72bd.js"><link rel="prefetch" href="/note-book/assets/js/321.608dd5b6.js"><link rel="prefetch" href="/note-book/assets/js/322.f15ee69b.js"><link rel="prefetch" href="/note-book/assets/js/323.735979ae.js"><link rel="prefetch" href="/note-book/assets/js/324.92f73d1b.js"><link rel="prefetch" href="/note-book/assets/js/325.f97739ac.js"><link rel="prefetch" href="/note-book/assets/js/326.ad9c7455.js"><link rel="prefetch" href="/note-book/assets/js/327.29863dd9.js"><link rel="prefetch" href="/note-book/assets/js/328.2c300597.js"><link rel="prefetch" href="/note-book/assets/js/329.9fa5a2f6.js"><link rel="prefetch" href="/note-book/assets/js/33.5eb42e2c.js"><link rel="prefetch" href="/note-book/assets/js/330.8859d5fb.js"><link rel="prefetch" href="/note-book/assets/js/331.30c788e6.js"><link rel="prefetch" href="/note-book/assets/js/332.37b6dd92.js"><link rel="prefetch" href="/note-book/assets/js/333.75146f4a.js"><link rel="prefetch" href="/note-book/assets/js/334.bea339db.js"><link rel="prefetch" href="/note-book/assets/js/335.44949df9.js"><link rel="prefetch" href="/note-book/assets/js/336.1cec9fc5.js"><link rel="prefetch" href="/note-book/assets/js/337.179f52ff.js"><link rel="prefetch" href="/note-book/assets/js/338.6e705b2e.js"><link rel="prefetch" href="/note-book/assets/js/339.6e0c7792.js"><link rel="prefetch" href="/note-book/assets/js/34.9767484d.js"><link rel="prefetch" href="/note-book/assets/js/340.a1261f0d.js"><link rel="prefetch" href="/note-book/assets/js/341.55cc5708.js"><link rel="prefetch" href="/note-book/assets/js/342.6986f724.js"><link rel="prefetch" href="/note-book/assets/js/343.ff01009b.js"><link rel="prefetch" href="/note-book/assets/js/344.49dc1449.js"><link rel="prefetch" href="/note-book/assets/js/345.0523ced1.js"><link rel="prefetch" href="/note-book/assets/js/346.d5c25906.js"><link rel="prefetch" href="/note-book/assets/js/347.5d77462a.js"><link rel="prefetch" href="/note-book/assets/js/348.39e7ea64.js"><link rel="prefetch" href="/note-book/assets/js/349.2d671cc0.js"><link rel="prefetch" href="/note-book/assets/js/35.4c8a6a40.js"><link rel="prefetch" href="/note-book/assets/js/350.d0070b62.js"><link rel="prefetch" href="/note-book/assets/js/351.278ed143.js"><link rel="prefetch" href="/note-book/assets/js/352.af88b230.js"><link rel="prefetch" href="/note-book/assets/js/353.a889e7c5.js"><link rel="prefetch" href="/note-book/assets/js/354.157dc62f.js"><link rel="prefetch" href="/note-book/assets/js/355.d5d703a9.js"><link rel="prefetch" href="/note-book/assets/js/356.f1a7454b.js"><link rel="prefetch" href="/note-book/assets/js/357.9b6ad3ec.js"><link rel="prefetch" href="/note-book/assets/js/358.0c1b5940.js"><link rel="prefetch" href="/note-book/assets/js/359.da94e2ad.js"><link rel="prefetch" href="/note-book/assets/js/36.0a4ca310.js"><link rel="prefetch" href="/note-book/assets/js/360.97bbf7dd.js"><link rel="prefetch" href="/note-book/assets/js/361.5d51724e.js"><link rel="prefetch" href="/note-book/assets/js/362.834e4053.js"><link rel="prefetch" href="/note-book/assets/js/363.ea301ace.js"><link rel="prefetch" href="/note-book/assets/js/364.cca98a13.js"><link rel="prefetch" href="/note-book/assets/js/365.b38c569e.js"><link rel="prefetch" href="/note-book/assets/js/366.5698eb0f.js"><link rel="prefetch" href="/note-book/assets/js/367.21aab168.js"><link rel="prefetch" href="/note-book/assets/js/368.a78cff88.js"><link rel="prefetch" href="/note-book/assets/js/369.17b27cec.js"><link rel="prefetch" href="/note-book/assets/js/37.3605d6c3.js"><link rel="prefetch" href="/note-book/assets/js/370.2c2205b1.js"><link rel="prefetch" href="/note-book/assets/js/371.b26a5ee8.js"><link rel="prefetch" href="/note-book/assets/js/372.26c08999.js"><link rel="prefetch" href="/note-book/assets/js/373.bda71e95.js"><link rel="prefetch" href="/note-book/assets/js/374.8f39f5e0.js"><link rel="prefetch" href="/note-book/assets/js/375.f172c629.js"><link rel="prefetch" href="/note-book/assets/js/376.9f1011ea.js"><link rel="prefetch" href="/note-book/assets/js/377.f1ac9bbf.js"><link rel="prefetch" href="/note-book/assets/js/378.bf0e0be9.js"><link rel="prefetch" href="/note-book/assets/js/379.85084ab2.js"><link rel="prefetch" href="/note-book/assets/js/38.b597fce6.js"><link rel="prefetch" href="/note-book/assets/js/380.5581bbe3.js"><link rel="prefetch" href="/note-book/assets/js/381.394f9ff2.js"><link rel="prefetch" href="/note-book/assets/js/382.243a4a35.js"><link rel="prefetch" href="/note-book/assets/js/383.e28e4b03.js"><link rel="prefetch" href="/note-book/assets/js/384.ab28c9a1.js"><link rel="prefetch" href="/note-book/assets/js/385.765b1e97.js"><link rel="prefetch" href="/note-book/assets/js/386.2e5d37c3.js"><link rel="prefetch" href="/note-book/assets/js/387.1d504ce3.js"><link rel="prefetch" href="/note-book/assets/js/388.081ead53.js"><link rel="prefetch" href="/note-book/assets/js/389.241f24f9.js"><link rel="prefetch" href="/note-book/assets/js/39.45a15de2.js"><link rel="prefetch" href="/note-book/assets/js/390.71352a5d.js"><link rel="prefetch" href="/note-book/assets/js/391.cf76a00a.js"><link rel="prefetch" href="/note-book/assets/js/392.c1667987.js"><link rel="prefetch" href="/note-book/assets/js/393.7b2f1f62.js"><link rel="prefetch" href="/note-book/assets/js/394.54034c32.js"><link rel="prefetch" href="/note-book/assets/js/395.72f371ba.js"><link rel="prefetch" href="/note-book/assets/js/396.335ee030.js"><link rel="prefetch" href="/note-book/assets/js/397.4a95801b.js"><link rel="prefetch" href="/note-book/assets/js/398.1a299857.js"><link rel="prefetch" href="/note-book/assets/js/399.a6f36bd7.js"><link rel="prefetch" href="/note-book/assets/js/4.3cab386e.js"><link rel="prefetch" href="/note-book/assets/js/40.ce5d3977.js"><link rel="prefetch" href="/note-book/assets/js/400.b1da3d0a.js"><link rel="prefetch" href="/note-book/assets/js/401.0d127dc3.js"><link rel="prefetch" href="/note-book/assets/js/402.b552fa25.js"><link rel="prefetch" href="/note-book/assets/js/403.862017ad.js"><link rel="prefetch" href="/note-book/assets/js/404.595a0dce.js"><link rel="prefetch" href="/note-book/assets/js/405.4bedd3db.js"><link rel="prefetch" href="/note-book/assets/js/406.544b8201.js"><link rel="prefetch" href="/note-book/assets/js/407.a08b7898.js"><link rel="prefetch" href="/note-book/assets/js/408.a89e28ef.js"><link rel="prefetch" href="/note-book/assets/js/409.ccf5fbaf.js"><link rel="prefetch" href="/note-book/assets/js/41.1395d6f9.js"><link rel="prefetch" href="/note-book/assets/js/410.dcd2fe7d.js"><link rel="prefetch" href="/note-book/assets/js/411.4faddc93.js"><link rel="prefetch" href="/note-book/assets/js/412.d10c3f9f.js"><link rel="prefetch" href="/note-book/assets/js/413.8f95d8b0.js"><link rel="prefetch" href="/note-book/assets/js/414.890d6916.js"><link rel="prefetch" href="/note-book/assets/js/415.190c3abf.js"><link rel="prefetch" href="/note-book/assets/js/416.675b5875.js"><link rel="prefetch" href="/note-book/assets/js/417.1dd7416e.js"><link rel="prefetch" href="/note-book/assets/js/418.b8d17f51.js"><link rel="prefetch" href="/note-book/assets/js/419.3ac709ff.js"><link rel="prefetch" href="/note-book/assets/js/42.75fb9839.js"><link rel="prefetch" href="/note-book/assets/js/420.8a1b4df8.js"><link rel="prefetch" href="/note-book/assets/js/421.b0f55c3d.js"><link rel="prefetch" href="/note-book/assets/js/422.0c590d40.js"><link rel="prefetch" href="/note-book/assets/js/423.4734fc3c.js"><link rel="prefetch" href="/note-book/assets/js/424.a5738e05.js"><link rel="prefetch" href="/note-book/assets/js/425.f2d50725.js"><link rel="prefetch" href="/note-book/assets/js/426.d8b30f4e.js"><link rel="prefetch" href="/note-book/assets/js/427.caba511b.js"><link rel="prefetch" href="/note-book/assets/js/428.14863787.js"><link rel="prefetch" href="/note-book/assets/js/429.bd84fbf1.js"><link rel="prefetch" href="/note-book/assets/js/43.b68c618d.js"><link rel="prefetch" href="/note-book/assets/js/430.a617d1be.js"><link rel="prefetch" href="/note-book/assets/js/431.97afd744.js"><link rel="prefetch" href="/note-book/assets/js/432.59215384.js"><link rel="prefetch" href="/note-book/assets/js/433.ffe0c303.js"><link rel="prefetch" href="/note-book/assets/js/434.4bbff41a.js"><link rel="prefetch" href="/note-book/assets/js/435.80b6aa62.js"><link rel="prefetch" href="/note-book/assets/js/436.2873f2ba.js"><link rel="prefetch" href="/note-book/assets/js/437.0d2d7501.js"><link rel="prefetch" href="/note-book/assets/js/438.5eef4f6c.js"><link rel="prefetch" href="/note-book/assets/js/439.bac2de21.js"><link rel="prefetch" href="/note-book/assets/js/44.09c6619e.js"><link rel="prefetch" href="/note-book/assets/js/440.b7b218ae.js"><link rel="prefetch" href="/note-book/assets/js/441.ac5b4d5b.js"><link rel="prefetch" href="/note-book/assets/js/442.e8b621eb.js"><link rel="prefetch" href="/note-book/assets/js/443.d0d53873.js"><link rel="prefetch" href="/note-book/assets/js/444.28951016.js"><link rel="prefetch" href="/note-book/assets/js/445.f6657203.js"><link rel="prefetch" href="/note-book/assets/js/446.7a68db41.js"><link rel="prefetch" href="/note-book/assets/js/447.caafb0ca.js"><link rel="prefetch" href="/note-book/assets/js/448.b2440436.js"><link rel="prefetch" href="/note-book/assets/js/449.9b601711.js"><link rel="prefetch" href="/note-book/assets/js/45.91809cab.js"><link rel="prefetch" href="/note-book/assets/js/450.8bf11b02.js"><link rel="prefetch" href="/note-book/assets/js/451.23f1da1a.js"><link rel="prefetch" href="/note-book/assets/js/452.05713d6f.js"><link rel="prefetch" href="/note-book/assets/js/453.901c2b92.js"><link rel="prefetch" href="/note-book/assets/js/454.0bf1c12f.js"><link rel="prefetch" href="/note-book/assets/js/455.eb884743.js"><link rel="prefetch" href="/note-book/assets/js/456.7bf6f141.js"><link rel="prefetch" href="/note-book/assets/js/457.1cf75e80.js"><link rel="prefetch" href="/note-book/assets/js/458.686e8e77.js"><link rel="prefetch" href="/note-book/assets/js/459.40bcb292.js"><link rel="prefetch" href="/note-book/assets/js/46.f235665d.js"><link rel="prefetch" href="/note-book/assets/js/460.b113a8b0.js"><link rel="prefetch" href="/note-book/assets/js/461.00d97be6.js"><link rel="prefetch" href="/note-book/assets/js/462.5cece320.js"><link rel="prefetch" href="/note-book/assets/js/463.949d1bee.js"><link rel="prefetch" href="/note-book/assets/js/464.f2e2d5a5.js"><link rel="prefetch" href="/note-book/assets/js/465.37007d50.js"><link rel="prefetch" href="/note-book/assets/js/466.987905ee.js"><link rel="prefetch" href="/note-book/assets/js/467.161b4955.js"><link rel="prefetch" href="/note-book/assets/js/468.2c5ec0b1.js"><link rel="prefetch" href="/note-book/assets/js/469.267d2fdb.js"><link rel="prefetch" href="/note-book/assets/js/47.17d61c2a.js"><link rel="prefetch" href="/note-book/assets/js/470.bdcfcc5c.js"><link rel="prefetch" href="/note-book/assets/js/471.1782faef.js"><link rel="prefetch" href="/note-book/assets/js/472.5a1cf8da.js"><link rel="prefetch" href="/note-book/assets/js/473.68151d57.js"><link rel="prefetch" href="/note-book/assets/js/474.b3b41127.js"><link rel="prefetch" href="/note-book/assets/js/475.2173e481.js"><link rel="prefetch" href="/note-book/assets/js/476.a04c8f5c.js"><link rel="prefetch" href="/note-book/assets/js/477.8e19b89c.js"><link rel="prefetch" href="/note-book/assets/js/478.d5853ac4.js"><link rel="prefetch" href="/note-book/assets/js/479.c93cb821.js"><link rel="prefetch" href="/note-book/assets/js/48.7e66871f.js"><link rel="prefetch" href="/note-book/assets/js/480.3db338a9.js"><link rel="prefetch" href="/note-book/assets/js/481.a0dfbe43.js"><link rel="prefetch" href="/note-book/assets/js/482.19d2ea61.js"><link rel="prefetch" href="/note-book/assets/js/483.22348fbd.js"><link rel="prefetch" href="/note-book/assets/js/484.f6a64818.js"><link rel="prefetch" href="/note-book/assets/js/485.b1dd6348.js"><link rel="prefetch" href="/note-book/assets/js/486.31543ee7.js"><link rel="prefetch" href="/note-book/assets/js/487.001c7694.js"><link rel="prefetch" href="/note-book/assets/js/488.7c39f3af.js"><link rel="prefetch" href="/note-book/assets/js/489.1059e46f.js"><link rel="prefetch" href="/note-book/assets/js/49.faf3e9d3.js"><link rel="prefetch" href="/note-book/assets/js/490.eb1ab407.js"><link rel="prefetch" href="/note-book/assets/js/491.cad670ab.js"><link rel="prefetch" href="/note-book/assets/js/492.42a5e0c1.js"><link rel="prefetch" href="/note-book/assets/js/493.85e15d90.js"><link rel="prefetch" href="/note-book/assets/js/494.16322fad.js"><link rel="prefetch" href="/note-book/assets/js/495.155d6795.js"><link rel="prefetch" href="/note-book/assets/js/496.7e2655ba.js"><link rel="prefetch" href="/note-book/assets/js/497.9a63a34d.js"><link rel="prefetch" href="/note-book/assets/js/498.0c8d06f4.js"><link rel="prefetch" href="/note-book/assets/js/499.d8e0fc8b.js"><link rel="prefetch" href="/note-book/assets/js/5.6feb466f.js"><link rel="prefetch" href="/note-book/assets/js/50.31939c0f.js"><link rel="prefetch" href="/note-book/assets/js/500.e01bd55c.js"><link rel="prefetch" href="/note-book/assets/js/501.1fe210c3.js"><link rel="prefetch" href="/note-book/assets/js/502.b160b849.js"><link rel="prefetch" href="/note-book/assets/js/503.93c02cce.js"><link rel="prefetch" href="/note-book/assets/js/504.a4e73db1.js"><link rel="prefetch" href="/note-book/assets/js/505.93e7f2b2.js"><link rel="prefetch" href="/note-book/assets/js/506.66889fe0.js"><link rel="prefetch" href="/note-book/assets/js/507.ae019d98.js"><link rel="prefetch" href="/note-book/assets/js/508.b9505823.js"><link rel="prefetch" href="/note-book/assets/js/509.625bb402.js"><link rel="prefetch" href="/note-book/assets/js/510.9caed09d.js"><link rel="prefetch" href="/note-book/assets/js/511.991d4671.js"><link rel="prefetch" href="/note-book/assets/js/512.5a6d56e8.js"><link rel="prefetch" href="/note-book/assets/js/513.b4e90dba.js"><link rel="prefetch" href="/note-book/assets/js/514.237fd8bd.js"><link rel="prefetch" href="/note-book/assets/js/515.a89362da.js"><link rel="prefetch" href="/note-book/assets/js/516.d2f33f2e.js"><link rel="prefetch" href="/note-book/assets/js/517.d54e5dd9.js"><link rel="prefetch" href="/note-book/assets/js/518.c4c2cba6.js"><link rel="prefetch" href="/note-book/assets/js/519.dc2cd3b6.js"><link rel="prefetch" href="/note-book/assets/js/52.91df3571.js"><link rel="prefetch" href="/note-book/assets/js/520.5dbe66a1.js"><link rel="prefetch" href="/note-book/assets/js/521.9e2385f2.js"><link rel="prefetch" href="/note-book/assets/js/522.bd83a313.js"><link rel="prefetch" href="/note-book/assets/js/523.4e76ed91.js"><link rel="prefetch" href="/note-book/assets/js/524.ea31775c.js"><link rel="prefetch" href="/note-book/assets/js/525.003da399.js"><link rel="prefetch" href="/note-book/assets/js/526.b24fe5e5.js"><link rel="prefetch" href="/note-book/assets/js/527.ac76b914.js"><link rel="prefetch" href="/note-book/assets/js/528.483bdd06.js"><link rel="prefetch" href="/note-book/assets/js/529.fc4e182b.js"><link rel="prefetch" href="/note-book/assets/js/53.0934e343.js"><link rel="prefetch" href="/note-book/assets/js/530.3141415e.js"><link rel="prefetch" href="/note-book/assets/js/531.9701c0a1.js"><link rel="prefetch" href="/note-book/assets/js/532.6ff00254.js"><link rel="prefetch" href="/note-book/assets/js/533.13f5330a.js"><link rel="prefetch" href="/note-book/assets/js/534.bf083c48.js"><link rel="prefetch" href="/note-book/assets/js/535.90969fd0.js"><link rel="prefetch" href="/note-book/assets/js/536.8ca12c38.js"><link rel="prefetch" href="/note-book/assets/js/537.fc766a67.js"><link rel="prefetch" href="/note-book/assets/js/538.cd6fc42e.js"><link rel="prefetch" href="/note-book/assets/js/539.7965b37c.js"><link rel="prefetch" href="/note-book/assets/js/54.d5b3b059.js"><link rel="prefetch" href="/note-book/assets/js/540.5c8c65ac.js"><link rel="prefetch" href="/note-book/assets/js/541.a59402ee.js"><link rel="prefetch" href="/note-book/assets/js/542.bfd362fc.js"><link rel="prefetch" href="/note-book/assets/js/543.90963ff5.js"><link rel="prefetch" href="/note-book/assets/js/544.73ab71f2.js"><link rel="prefetch" href="/note-book/assets/js/545.42a60b10.js"><link rel="prefetch" href="/note-book/assets/js/546.d1442176.js"><link rel="prefetch" href="/note-book/assets/js/547.913b95c3.js"><link rel="prefetch" href="/note-book/assets/js/548.581de75b.js"><link rel="prefetch" href="/note-book/assets/js/549.91d5ace7.js"><link rel="prefetch" href="/note-book/assets/js/55.508faa74.js"><link rel="prefetch" href="/note-book/assets/js/550.71003ee8.js"><link rel="prefetch" href="/note-book/assets/js/551.7c6da1a6.js"><link rel="prefetch" href="/note-book/assets/js/552.40463abe.js"><link rel="prefetch" href="/note-book/assets/js/553.27df69d8.js"><link rel="prefetch" href="/note-book/assets/js/554.016268b3.js"><link rel="prefetch" href="/note-book/assets/js/555.2ba04e5a.js"><link rel="prefetch" href="/note-book/assets/js/556.bd07d687.js"><link rel="prefetch" href="/note-book/assets/js/557.4c163046.js"><link rel="prefetch" href="/note-book/assets/js/558.5a57f0ff.js"><link rel="prefetch" href="/note-book/assets/js/559.f4e3cc85.js"><link rel="prefetch" href="/note-book/assets/js/56.135634f9.js"><link rel="prefetch" href="/note-book/assets/js/560.9cfdbc23.js"><link rel="prefetch" href="/note-book/assets/js/561.3cce5224.js"><link rel="prefetch" href="/note-book/assets/js/562.bad46d8f.js"><link rel="prefetch" href="/note-book/assets/js/563.b29665f4.js"><link rel="prefetch" href="/note-book/assets/js/564.d6d97517.js"><link rel="prefetch" href="/note-book/assets/js/565.6587fff1.js"><link rel="prefetch" href="/note-book/assets/js/566.3f1d4981.js"><link rel="prefetch" href="/note-book/assets/js/567.56683a73.js"><link rel="prefetch" href="/note-book/assets/js/568.e1eafd5b.js"><link rel="prefetch" href="/note-book/assets/js/569.d2fa2b24.js"><link rel="prefetch" href="/note-book/assets/js/57.3e72a449.js"><link rel="prefetch" href="/note-book/assets/js/570.f84a45ad.js"><link rel="prefetch" href="/note-book/assets/js/571.a80a9ac0.js"><link rel="prefetch" href="/note-book/assets/js/572.c39a44f0.js"><link rel="prefetch" href="/note-book/assets/js/573.0eff1bbe.js"><link rel="prefetch" href="/note-book/assets/js/574.f3420403.js"><link rel="prefetch" href="/note-book/assets/js/575.d5960bd7.js"><link rel="prefetch" href="/note-book/assets/js/576.6f2866b9.js"><link rel="prefetch" href="/note-book/assets/js/577.89ac9901.js"><link rel="prefetch" href="/note-book/assets/js/578.7f5b8dff.js"><link rel="prefetch" href="/note-book/assets/js/579.40e10735.js"><link rel="prefetch" href="/note-book/assets/js/58.6b89eb8e.js"><link rel="prefetch" href="/note-book/assets/js/580.15c88079.js"><link rel="prefetch" href="/note-book/assets/js/581.b6cd6df0.js"><link rel="prefetch" href="/note-book/assets/js/582.f9be19a0.js"><link rel="prefetch" href="/note-book/assets/js/583.77788d34.js"><link rel="prefetch" href="/note-book/assets/js/584.4418f544.js"><link rel="prefetch" href="/note-book/assets/js/585.fdf4e84b.js"><link rel="prefetch" href="/note-book/assets/js/586.d890d699.js"><link rel="prefetch" href="/note-book/assets/js/587.0f33d924.js"><link rel="prefetch" href="/note-book/assets/js/588.1e6409cc.js"><link rel="prefetch" href="/note-book/assets/js/589.0091ffac.js"><link rel="prefetch" href="/note-book/assets/js/59.a84be539.js"><link rel="prefetch" href="/note-book/assets/js/590.4f6df13b.js"><link rel="prefetch" href="/note-book/assets/js/591.331df64d.js"><link rel="prefetch" href="/note-book/assets/js/592.775c8cd1.js"><link rel="prefetch" href="/note-book/assets/js/593.8b1e8cb5.js"><link rel="prefetch" href="/note-book/assets/js/594.0e4b5c57.js"><link rel="prefetch" href="/note-book/assets/js/595.c8e0d035.js"><link rel="prefetch" href="/note-book/assets/js/596.954bc911.js"><link rel="prefetch" href="/note-book/assets/js/597.c7d2406c.js"><link rel="prefetch" href="/note-book/assets/js/598.1e071e7f.js"><link rel="prefetch" href="/note-book/assets/js/599.9e1653ab.js"><link rel="prefetch" href="/note-book/assets/js/6.3b81d046.js"><link rel="prefetch" href="/note-book/assets/js/60.6f45a476.js"><link rel="prefetch" href="/note-book/assets/js/600.d6a599ec.js"><link rel="prefetch" href="/note-book/assets/js/601.81d69354.js"><link rel="prefetch" href="/note-book/assets/js/602.2e36cf40.js"><link rel="prefetch" href="/note-book/assets/js/603.d93ba428.js"><link rel="prefetch" href="/note-book/assets/js/604.c7b4f918.js"><link rel="prefetch" href="/note-book/assets/js/605.bbf24d3f.js"><link rel="prefetch" href="/note-book/assets/js/606.ece9d08c.js"><link rel="prefetch" href="/note-book/assets/js/607.b43ceffb.js"><link rel="prefetch" href="/note-book/assets/js/61.9a271dd6.js"><link rel="prefetch" href="/note-book/assets/js/62.f8287a48.js"><link rel="prefetch" href="/note-book/assets/js/63.a06f184a.js"><link rel="prefetch" href="/note-book/assets/js/64.d933626b.js"><link rel="prefetch" href="/note-book/assets/js/65.bf641020.js"><link rel="prefetch" href="/note-book/assets/js/66.273710ab.js"><link rel="prefetch" href="/note-book/assets/js/67.adeaa59a.js"><link rel="prefetch" href="/note-book/assets/js/68.b3018348.js"><link rel="prefetch" href="/note-book/assets/js/69.c157fad7.js"><link rel="prefetch" href="/note-book/assets/js/70.a46827b5.js"><link rel="prefetch" href="/note-book/assets/js/71.15e8c518.js"><link rel="prefetch" href="/note-book/assets/js/72.544abb4a.js"><link rel="prefetch" href="/note-book/assets/js/73.f5f02fc1.js"><link rel="prefetch" href="/note-book/assets/js/74.31f19bb6.js"><link rel="prefetch" href="/note-book/assets/js/75.bb0d39c4.js"><link rel="prefetch" href="/note-book/assets/js/76.cea52c34.js"><link rel="prefetch" href="/note-book/assets/js/77.ed8e673e.js"><link rel="prefetch" href="/note-book/assets/js/78.e7fb989f.js"><link rel="prefetch" href="/note-book/assets/js/79.651b2aa7.js"><link rel="prefetch" href="/note-book/assets/js/8.19b555d9.js"><link rel="prefetch" href="/note-book/assets/js/80.7f663a9c.js"><link rel="prefetch" href="/note-book/assets/js/81.ca0ab89c.js"><link rel="prefetch" href="/note-book/assets/js/82.53218f29.js"><link rel="prefetch" href="/note-book/assets/js/83.aa88df8b.js"><link rel="prefetch" href="/note-book/assets/js/84.3d4f7b88.js"><link rel="prefetch" href="/note-book/assets/js/85.27312772.js"><link rel="prefetch" href="/note-book/assets/js/86.39436eaf.js"><link rel="prefetch" href="/note-book/assets/js/87.520f3125.js"><link rel="prefetch" href="/note-book/assets/js/88.85643cb8.js"><link rel="prefetch" href="/note-book/assets/js/89.5c520acf.js"><link rel="prefetch" href="/note-book/assets/js/9.93aa4668.js"><link rel="prefetch" href="/note-book/assets/js/90.53a08e3e.js"><link rel="prefetch" href="/note-book/assets/js/91.f996e4e6.js"><link rel="prefetch" href="/note-book/assets/js/92.8799b404.js"><link rel="prefetch" href="/note-book/assets/js/93.ec208b63.js"><link rel="prefetch" href="/note-book/assets/js/94.a1173cef.js"><link rel="prefetch" href="/note-book/assets/js/95.5f712c3b.js"><link rel="prefetch" href="/note-book/assets/js/96.b09a5cb9.js"><link rel="prefetch" href="/note-book/assets/js/97.bebab195.js"><link rel="prefetch" href="/note-book/assets/js/98.2767f30c.js"><link rel="prefetch" href="/note-book/assets/js/99.c5887c89.js">
    <link rel="stylesheet" href="/note-book/assets/css/0.styles.f6819672.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-book/" class="home-link router-link-active"><img src="/note-book/mlogo.svg" alt="MRCODE-BOOK" class="logo"> <span class="site-name can-hide">MRCODE-BOOK</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-book/posts/" class="nav-link">
  博客（零散文章）
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="设计模式" class="mobile-dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/imocc/design_pattern/" class="nav-link">
  设计模式（慕课）
</a></li><li class="dropdown-item"><!----> <a href="/note-book/design_pattern/" class="nav-link">
  研磨设计模式（李兴华）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Elasticsearch" class="dropdown-title"><span class="title">Elasticsearch</span> <span class="arrow down"></span></button> <button type="button" aria-label="Elasticsearch" class="mobile-dropdown-title"><span class="title">Elasticsearch</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-core/" class="nav-link">
  核心知识篇
</a></li><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-senior/" class="nav-link">
  高级知识篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="缓存架构-亿级流量电商详情页系统实战" class="dropdown-title"><span class="title">缓存架构-亿级流量电商详情页系统实战</span> <span class="arrow down"></span></button> <button type="button" aria-label="缓存架构-亿级流量电商详情页系统实战" class="mobile-dropdown-title"><span class="title">缓存架构-亿级流量电商详情页系统实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          综合性导航
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/cache-pdp/" class="nav-link">
  全目录导航
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/001-introduce.html" class="nav-link">
  第一版（001 ~ 123 章）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/124.html" class="nav-link">
  第二版（124 ~ 195 章）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/121.html" class="nav-link">
  课程总结（难题与解决方案）
</a></li></ul></li><li class="dropdown-item"><h4>
          精彩知识精选
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/cache-pdp/redis/007.html" class="nav-link">
  Redis 篇（redis 企业级集群架构）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/035.html" class="nav-link">
  多级缓存架构设计
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/040.html" class="nav-link">
  数据库 + 缓存双写一致性解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/045.html" class="nav-link">
  缓存维度化拆分解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/051.html" class="nav-link">
  缓存命中率提升解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/057.html" class="nav-link">
  缓存并发重建冲突解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/069.html" class="nav-link">
  缓存预热解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/077.html" class="nav-link">
  热点缓存自动降级方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/110.html" class="nav-link">
  缓存雪崩解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/117.html" class="nav-link">
  缓存穿透解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/119.html" class="nav-link">
  缓存失效解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/hystrix/084.html" class="nav-link">
  高可用分布式系统架构设计（hystrix 篇）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/047.html" class="nav-link">
  spring boot 整合 ehcache
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/storm/062.html" class="nav-link">
  史上最通俗易懂 Storm 教程
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/introduce/" class="nav-link">
  本笔记介绍
</a></li><li class="dropdown-item"><!----> <a href="https://zq99299.github.io/linux-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Linux 基础篇
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/note-book/spring-cloud-tutorial/" class="nav-link">
  Spring Cloud
</a></li><li class="dropdown-item"><!----> <a href="/note-book/css-zxx/" class="nav-link">
  CSS 深入理解（张鑫旭）
</a></li><li class="dropdown-item"><!----> <a href="/note-book/regular/" class="nav-link">
  正则入门
</a></li><li class="dropdown-item"><h4>
          思路拓展
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/back-end-storage/" class="nav-link router-link-active">
  后端存储实战
</a></li><li class="dropdown-subitem"><a href="/note-book/middle-office/" class="nav-link">
  说透中台
</a></li><li class="dropdown-subitem"><a href="/note-book/oath2/" class="nav-link">
  Oath 2.0 实战
</a></li></ul></li><li class="dropdown-item"><h4>
          Git
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/git/" class="nav-link">
  Git 零散知识
</a></li><li class="dropdown-subitem"><a href="/note-book/git-scm/" class="nav-link">
  Git 系统学习笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          Mycat
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/mycat/" class="nav-link">
  Mycat 1
</a></li><li class="dropdown-subitem"><a href="/note-book/mycat2/" class="nav-link">
  Mycat 2
</a></li></ul></li><li class="dropdown-item"><h4>
          笔记精选汇总
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub 站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://book.mrcode.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国内镜像站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-book/posts-failure.html" class="nav-link">
  博客文章 /_posts/ 路径失效说明
</a></li></ul></div></div> <a href="https://github.com/zq99299/note-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note-book/posts/" class="nav-link">
  博客（零散文章）
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计模式" class="dropdown-title"><span class="title">设计模式</span> <span class="arrow down"></span></button> <button type="button" aria-label="设计模式" class="mobile-dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/imocc/design_pattern/" class="nav-link">
  设计模式（慕课）
</a></li><li class="dropdown-item"><!----> <a href="/note-book/design_pattern/" class="nav-link">
  研磨设计模式（李兴华）
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Elasticsearch" class="dropdown-title"><span class="title">Elasticsearch</span> <span class="arrow down"></span></button> <button type="button" aria-label="Elasticsearch" class="mobile-dropdown-title"><span class="title">Elasticsearch</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-core/" class="nav-link">
  核心知识篇
</a></li><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-senior/" class="nav-link">
  高级知识篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="缓存架构-亿级流量电商详情页系统实战" class="dropdown-title"><span class="title">缓存架构-亿级流量电商详情页系统实战</span> <span class="arrow down"></span></button> <button type="button" aria-label="缓存架构-亿级流量电商详情页系统实战" class="mobile-dropdown-title"><span class="title">缓存架构-亿级流量电商详情页系统实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          综合性导航
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/cache-pdp/" class="nav-link">
  全目录导航
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/001-introduce.html" class="nav-link">
  第一版（001 ~ 123 章）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/124.html" class="nav-link">
  第二版（124 ~ 195 章）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/121.html" class="nav-link">
  课程总结（难题与解决方案）
</a></li></ul></li><li class="dropdown-item"><h4>
          精彩知识精选
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/cache-pdp/redis/007.html" class="nav-link">
  Redis 篇（redis 企业级集群架构）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/035.html" class="nav-link">
  多级缓存架构设计
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/040.html" class="nav-link">
  数据库 + 缓存双写一致性解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/045.html" class="nav-link">
  缓存维度化拆分解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/051.html" class="nav-link">
  缓存命中率提升解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/057.html" class="nav-link">
  缓存并发重建冲突解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/069.html" class="nav-link">
  缓存预热解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/077.html" class="nav-link">
  热点缓存自动降级方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/110.html" class="nav-link">
  缓存雪崩解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/117.html" class="nav-link">
  缓存穿透解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/119.html" class="nav-link">
  缓存失效解决方案
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/hystrix/084.html" class="nav-link">
  高可用分布式系统架构设计（hystrix 篇）
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/047.html" class="nav-link">
  spring boot 整合 ehcache
</a></li><li class="dropdown-subitem"><a href="/note-book/cache-pdp/storm/062.html" class="nav-link">
  史上最通俗易懂 Storm 教程
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/introduce/" class="nav-link">
  本笔记介绍
</a></li><li class="dropdown-item"><!----> <a href="https://zq99299.github.io/linux-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Linux 基础篇
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="/note-book/spring-cloud-tutorial/" class="nav-link">
  Spring Cloud
</a></li><li class="dropdown-item"><!----> <a href="/note-book/css-zxx/" class="nav-link">
  CSS 深入理解（张鑫旭）
</a></li><li class="dropdown-item"><!----> <a href="/note-book/regular/" class="nav-link">
  正则入门
</a></li><li class="dropdown-item"><h4>
          思路拓展
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/back-end-storage/" class="nav-link router-link-active">
  后端存储实战
</a></li><li class="dropdown-subitem"><a href="/note-book/middle-office/" class="nav-link">
  说透中台
</a></li><li class="dropdown-subitem"><a href="/note-book/oath2/" class="nav-link">
  Oath 2.0 实战
</a></li></ul></li><li class="dropdown-item"><h4>
          Git
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/git/" class="nav-link">
  Git 零散知识
</a></li><li class="dropdown-subitem"><a href="/note-book/git-scm/" class="nav-link">
  Git 系统学习笔记
</a></li></ul></li><li class="dropdown-item"><h4>
          Mycat
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note-book/mycat/" class="nav-link">
  Mycat 1
</a></li><li class="dropdown-subitem"><a href="/note-book/mycat2/" class="nav-link">
  Mycat 2
</a></li></ul></li><li class="dropdown-item"><h4>
          笔记精选汇总
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/zq99299/repository-summary" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub 站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="http://book.mrcode.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国内镜像站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><!----> <a href="/note-book/posts-failure.html" class="nav-link">
  博客文章 /_posts/ 路径失效说明
</a></li></ul></div></div> <a href="https://github.com/zq99299/note-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/note-book/back-end-storage/" aria-current="page" class="sidebar-link">后端存储实战</a></li><li><a href="/note-book/back-end-storage/00/" class="sidebar-link">电商系统是如何设计的？</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>创业篇</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note-book/back-end-storage/01/" aria-current="page" class="sidebar-link">创业篇</a></li><li><a href="/note-book/back-end-storage/01/01.html" class="sidebar-link">创建和更新订单时，如何保证数据准确无误？</a></li><li><a href="/note-book/back-end-storage/01/02.html" class="sidebar-link">流量大、数据多的商品详情页系统该如何设计</a></li><li><a href="/note-book/back-end-storage/01/03.html" class="sidebar-link">复杂而又重要的购物车系统，应该如何设计？</a></li><li><a href="/note-book/back-end-storage/01/04.html" class="sidebar-link">事务：账户余额总是对不上账，怎么办？</a></li><li><a href="/note-book/back-end-storage/01/05.html" class="sidebar-link">分布式事务：如何保证多个系统间的数据是一致的？</a></li><li><a href="/note-book/back-end-storage/01/06.html" aria-current="page" class="active sidebar-link">如何用 Elasticsearch 构建商品搜索系统？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-book/back-end-storage/01/06.html#理解倒排索引机制" class="sidebar-link">理解倒排索引机制</a></li><li class="sidebar-sub-header"><a href="/note-book/back-end-storage/01/06.html#如何在-es-中构建商品的索引" class="sidebar-link">如何在 ES 中构建商品的索引?</a></li><li class="sidebar-sub-header"><a href="/note-book/back-end-storage/01/06.html#小结" class="sidebar-link">小结</a></li><li class="sidebar-sub-header"><a href="/note-book/back-end-storage/01/06.html#思考题" class="sidebar-link">思考题</a></li></ul></li><li><a href="/note-book/back-end-storage/01/07.html" class="sidebar-link">MySQL HA：如何将「删库跑路」的损失降到最低？</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>高速增长篇</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>海量数据篇</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="如何用-elasticsearch-构建商品搜索系统"><a href="#如何用-elasticsearch-构建商品搜索系统" class="header-anchor">#</a> 如何用 Elasticsearch 构建商品搜索系统？</h1> <p>搜索这个特性可以说是无处不在，现在很少有网站或者系统不提供搜索功能了，所以，即使你不是一个专业做搜索的程序员，也难免会遇到一些搜索相关的需求。搜索这个东西，表面上看功能很简单，就是一个搜索框，输入关键字，然后搜出来想要的内容就好了。</p> <p>搜索背后的实现，可以非常简单，简单到什么程度呢？我们就用一个 SQL，LIKE 一下就能实现；也可以很复杂，复杂到什么程度呢？不说百度谷歌这种专业做搜索的公司，其他非专业做搜索的互联网大厂，搜索团队大多是千人规模，这里面不仅有程序员，还有算法工程师、业务专家等等。二者的区别也仅仅是，搜索速度的快慢以及搜出来的内容好坏而已。</p> <p>今天这节课，我们就以电商中的商品搜索作为例子，来讲一下，如何用 ES(Elasticsearch) 来快速、低成本地构建一个体验还不错的搜索系统。</p> <h2 id="理解倒排索引机制"><a href="#理解倒排索引机制" class="header-anchor">#</a> 理解倒排索引机制</h2> <p>刚刚我们说了，既然我们的数据大多都是存在数据库里，用 SQL 的 LIKE 也能实现匹配，也能搜出结果，为什么还要专门做一套搜索系统呢？我先来和你分析一下，为什么数据库不适合做搜索。</p> <p><strong>搜索的核心需求是全文匹配</strong>，对于全文匹配，数据库的索引是根本派不上用场的，那只能全表扫描。全表扫描已经非常慢了，这还不算，还需要在每条记录上做全文匹配，也就是一个字一个字的比对，这个速度就更慢了。所以，使用数据来做搜索，性能上完全没法满足要求。</p> <p>那 ES 是怎么来解决搜索问题的呢？我们来举个例子说明一下，假设我们有这样两个商品，一个是烟台红富士苹果，一个是苹果手机 iPhone XS Max。</p> <p><img src="/note-book/assets/img/28a9b198c9b10a3b4d50a77d8fea6c0a.28a9b198.jpg" alt="img"></p> <p>这个表里面的 DOCID 就是唯一标识一条记录的 ID，和数据库里面的主键是类似的。</p> <p>为了能够支持快速地全文搜索，ES 中对于文本采用了一种特殊的索引：<strong>倒排索引（Inverted Index）</strong>。那我们看一下在 ES 中，这两条商品数据倒排索引长什么样？请看下面这个表。</p> <p><img src="/note-book/assets/img/6fcdd7e10c3e72b2abe635c8a5a6ff1c.6fcdd7e1.jpg" alt="img"></p> <p>可以看到，这个倒排索引的表，它是以单词作为索引的 Key，然后每个单词的倒排索引的值是一个列表，这个列表的元素就是含有这个单词的商品记录的 DOCID。</p> <p>这个倒排索引怎么构建的呢？当我们往 ES 写入商品记录的时候，ES 会先对需要搜索的字段，也就是商品标题进行<strong>分词</strong>。分词就是把一段连续的文本按照语义拆分成多个单词。然后 ES 按照单词来给商品记录做索引，就形成了上面那个表一样的倒排索引。</p> <p>当我们搜索关键字 「苹果手机」的时候，ES 会对关键字也进行分词，比如说，「苹果手机」被分为「苹果」和「手机」。然后，ES 会在倒排索引中去搜索我们输入的每个关键字分词，搜索结果应该是：</p> <p><img src="/note-book/assets/img/7191b2ba0e28d8b7db9871213664a6c2.7191b2ba.jpg" alt="img"></p> <p>666 和 888 这两条记录都能匹配上搜索的关键词，但是 888 这个商品比 666 这个商品匹配度更高，因为它两个单词都能匹配上，所以按照匹配度把结果做一个排序，最终返回的搜索结果就是：</p> <ul><li><strong>苹果</strong>Apple iPhone XS Max (A2104) 256GB 金色 移动联通电信 4G<strong>手机</strong>双卡双待</li> <li>烟台红富士<strong>苹果</strong>5kg 一级铂金大果 单果 230g 以上 新鲜水果</li></ul> <p>看起来搜索的效果还是不错的。</p> <p>为什么倒排索引可以做到快速搜索？我和你一起来分析一下上面这个例子的查找性能。</p> <p>这个搜索过程，其实就是对上面的倒排索引做了二次查找，一次找「苹果」，一次找「手机」。<strong>注意，整个搜索过程中，我们没有做过任何文本的模糊匹配</strong>。ES 的存储引擎存储倒排索引时，肯定不是像我们上面表格中展示那样存成一个二维表，实际上它的物理存储结构和 MySQL 的 InnoDB 的索引是差不多的，都是一颗查找树。</p> <p>对倒排索引做两次查找，也就是对树进行二次查找，它的时间复杂度，类似于 MySQL 中的二次命中索引的查找。显然，这个查找速度，比用 MySQL 全表扫描加上模糊匹配的方式，要快好几个数量级。</p> <h2 id="如何在-es-中构建商品的索引"><a href="#如何在-es-中构建商品的索引" class="header-anchor">#</a> 如何在 ES 中构建商品的索引?</h2> <p>理解了倒排索引的原理之后，我们一起用 ES 构建一个商品索引，简单实现一个商品搜索系统。虽然 ES 是为搜索而生的，但本质上，它仍然是一个存储系统。ES 里面的一些概念，基本上都可以在关系数据库中找到对应的名词，为了便于你快速理解这些概念，我把这些概念的对应关系列出来，你可以对照理解。</p> <p><img src="/note-book/assets/img/cdbfcc01166ad3a1fd2a12791d0079df.cdbfcc01.jpg" alt="img"></p> <p>在 ES 里面，数据的逻辑结构类似于 MongoDB，每条数据称为一个 <strong>DOCUMENT</strong>，简称 DOC。DOC 就是一个 JSON 对象，DOC 中的每个 JSON 字段，在 ES 中称为 <strong>FIELD</strong>，把一组具有相同字段的 DOC 存放在一起，存放它们的逻辑容器叫 <strong>INDEX</strong>，这些 DOC 的 JSON 结构称为 <strong>MAPPING</strong>。这里面最不好理解的就是这个 INDEX，它实际上类似于 MySQL 中表的概念，而不是我们通常理解的用于查找数据的索引。</p> <p>ES 是一个用 Java 开发的服务端程序，除了 Java 以外就没有什么外部依赖了，安装部署都非常简单，具体你可以参照它的官方文档先把 ES 安装好。我们这个示例中，使用的 ES 版本是目前的最新版本 7.6。</p> <p>另外，为了能让 ES 支持中文分词，需要给 ES 安装一个中文的分词插件 <code>IK Analysis for Elasticsearch</code>，这个插件的作用就是告诉 ES 怎么对中文文本进行分词。</p> <p>你可以直接执行下面的命令自动下载并安装：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token variable">$elasticsearch</span>-plugin <span class="token function">install</span> https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.6.0/elasticsearch-analysis-ik-7.6.0.zip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装完成后，需要重启 ES，验证一下是否安装成功：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X POST <span class="token string">&quot;localhost:9200/_analyze?pretty&quot;</span> -H <span class="token string">'Content-Type: application/json'</span> -d <span class="token string">'{ &quot;analyzer&quot;: &quot;ik_smart&quot;, &quot;text&quot;: &quot;极客时间&quot; }'</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;tokens&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token string">&quot;token&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;极&quot;</span>,
      <span class="token string">&quot;start_offset&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
      <span class="token string">&quot;end_offset&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
      <span class="token string">&quot;type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;CN_CHAR&quot;</span>,
      <span class="token string">&quot;position&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;token&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;客&quot;</span>,
      <span class="token string">&quot;start_offset&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
      <span class="token string">&quot;end_offset&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
      <span class="token string">&quot;type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;CN_CHAR&quot;</span>,
      <span class="token string">&quot;position&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>,
    <span class="token punctuation">{</span>
      <span class="token string">&quot;token&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;时间&quot;</span>,
      <span class="token string">&quot;start_offset&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
      <span class="token string">&quot;end_offset&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">4</span>,
      <span class="token string">&quot;type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;CN_WORD&quot;</span>,
      <span class="token string">&quot;position&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>可以看到，这个分词器把「极客时间」分成了极」、「客」和「时间」，没认出来「极客」这个词，还是有改进空间的。</p> <p>为了能实现商品搜索，我们需要先把商品信息存放到 ES 中，首先我们先定义存放在 ES 中商品的数据结构，也就是 MAPPING。</p> <p><img src="/note-book/assets/img/e6cadb1ad8311de9772e673161f94999.e6cadb1a.jpg" alt="img"></p> <p>我们这个 MAPPING 只要两个字段就够了，sku_id 就是商品 ID，title 保存商品的标题，当用户在搜索商品的时候，我们在 ES 中来匹配商品标题，返回符合条件商品的 sku_id 列表。ES 默认提供了标准的 RESTful 接口，不需要客户端，直接使用 HTTP 协议就可以访问，这里我们使用 curl 通过命令行来操作 ES。</p> <p>接下来我们使用上面这个 MAPPING 创建 INDEX，类似于 MySQL 中创建一个表</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X PUT <span class="token string">&quot;localhost:9200/sku&quot;</span> -H <span class="token string">'Content-Type: application/json'</span> -d <span class="token string">'{
        &quot;mappings&quot;: {
                &quot;properties&quot;: {
                        &quot;sku_id&quot;: {
                                &quot;type&quot;: &quot;long&quot;
                        },
                        &quot;title&quot;: {
                                &quot;type&quot;: &quot;text&quot;,
                                &quot;analyzer&quot;: &quot;ik_max_word&quot;,
                                &quot;search_analyzer&quot;: &quot;ik_max_word&quot;
                        }
                }
        }
}'</span>
<span class="token punctuation">{</span><span class="token string">&quot;acknowledged&quot;</span>:true,<span class="token string">&quot;shards_acknowledged&quot;</span>:true,<span class="token string">&quot;index&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;sku&quot;</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>这里面，使用 PUT 方法创建一个 INDEX，INDEX 的名称是「sku」，直接写在请求的 URL 中。请求的 BODY 是一个 JSON 对象，内容就是我们上面定义的 MAPPING，也就是数据结构。这里面需要注意一下，由于我们要在 title 这个字段上进行全文搜索，所以我们把数据类型定义为 text，并指定使用我们刚刚安装的中文分词插件 IK 作为这个字段的分词器。</p> <p>创建好 INDEX 之后，就可以往 INDEX 中写入商品数据，插入数据需要使用 HTTP POST 方法：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X POST <span class="token string">&quot;localhost:9200/sku/_doc/&quot;</span> -H <span class="token string">'Content-Type: application/json'</span> -d <span class="token string">'{
        &quot;sku_id&quot;: 100002860826,
        &quot;title&quot;: &quot;烟台红富士苹果 5kg 一级铂金大果 单果230g以上 新鲜水果&quot;
}'</span>
<span class="token punctuation">{</span><span class="token string">&quot;_index&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;sku&quot;</span>,<span class="token string">&quot;_type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;_doc&quot;</span>,<span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;yxQVSHABiy2kuAJG8ilW&quot;</span>,<span class="token string">&quot;_version&quot;</span>:1,<span class="token string">&quot;result&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;created&quot;</span>,<span class="token string">&quot;_shards&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;total&quot;</span>:2,<span class="token string">&quot;successful&quot;</span>:1,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;_seq_no&quot;</span>:0,<span class="token string">&quot;_primary_term&quot;</span>:1<span class="token punctuation">}</span>


<span class="token function">curl</span> -X POST <span class="token string">&quot;localhost:9200/sku/_doc/&quot;</span> -H <span class="token string">'Content-Type: application/json'</span> -d <span class="token string">'{
        &quot;sku_id&quot;: 100000177760,
        &quot;title&quot;: &quot;苹果 Apple iPhone XS Max (A2104) 256GB 金色 移动联通电信4G手机 双卡双待&quot;
}'</span>
<span class="token punctuation">{</span><span class="token string">&quot;_index&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;sku&quot;</span>,<span class="token string">&quot;_type&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;_doc&quot;</span>,<span class="token string">&quot;_id&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;zBQWSHABiy2kuAJGgim1&quot;</span>,<span class="token string">&quot;_version&quot;</span>:1,<span class="token string">&quot;result&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;created&quot;</span>,<span class="token string">&quot;_shards&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;total&quot;</span>:2,<span class="token string">&quot;successful&quot;</span>:1,<span class="token string">&quot;failed&quot;</span>:0<span class="token punctuation">}</span>,<span class="token string">&quot;_seq_no&quot;</span>:1,<span class="token string">&quot;_primary_term&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这里面我们插入了两条商品数据，一个烟台红富士，一个 iPhone 手机。然后就可以直接进行商品搜索了，搜索使用 HTTP GET 方法。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">curl</span> -X GET <span class="token string">'localhost:9200/sku/_search?pretty'</span> -H <span class="token string">'Content-Type: application/json'</span> -d <span class="token string">'{
  &quot;query&quot; : { &quot;match&quot; : { &quot;title&quot; : &quot;苹果手机&quot; }}
}'</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;took&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">23</span>,
  <span class="token string">&quot;timed_out&quot;</span> <span class="token builtin class-name">:</span> false,
  <span class="token string">&quot;_shards&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;total&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;successful&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
    <span class="token string">&quot;skipped&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
    <span class="token string">&quot;failed&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;hits&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;total&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;value&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
      <span class="token string">&quot;relation&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;eq&quot;</span>
    <span class="token punctuation">}</span>,
    <span class="token string">&quot;max_score&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0.8594865</span>,
    <span class="token string">&quot;hits&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;sku&quot;</span>,
        <span class="token string">&quot;_type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;_doc&quot;</span>,
        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;zBQWSHABiy2kuAJGgim1&quot;</span>,
        <span class="token string">&quot;_score&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0.8594865</span>,
        <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;sku_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">100000177760</span>,
          <span class="token string">&quot;title&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;苹果 Apple iPhone XS Max (A2104) 256GB 金色 移动联通电信4G手机 双卡双待&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>,
      <span class="token punctuation">{</span>
        <span class="token string">&quot;_index&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;sku&quot;</span>,
        <span class="token string">&quot;_type&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;_doc&quot;</span>,
        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;yxQVSHABiy2kuAJG8ilW&quot;</span>,
        <span class="token string">&quot;_score&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0.18577608</span>,
        <span class="token string">&quot;_source&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
          <span class="token string">&quot;sku_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">100002860826</span>,
          <span class="token string">&quot;title&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;烟台红富士苹果 5kg 一级铂金大果 单果230g以上 新鲜水果&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>我们先看一下请求中的 URL，其中的：</p> <ul><li><p>「sku」代表要在 sku 这个 INDEX 内进行查找，</p></li> <li><p>「_search」是一个关键字，表示要进行搜索，</p></li> <li><p>参数 pretty 表示格式化返回的 JSON，这样方便阅读。</p></li></ul> <p>再看一下请求 BODY 的 JSON，query 中的 match 表示要进行全文匹配，匹配的字段就是 title，关键字是「苹果手机」。</p> <p>可以看到，在返回结果中，匹配到了 2 条商品记录，和我们在前面讲解倒排索引时，预期返回的结果是一致的。</p> <p>我们来回顾一下使用 ES 构建商品搜索服务的这个过程：首先安装 ES 并启动服务，然后创建一个 INDEX，定义 MAPPING，写入数据后，执行查询并返回查询结果，其实，这个过程和我们使用数据库时，先建表、插入数据然后查询的过程，就是一样的。所以，你就把 ES 当做一个支持全文搜索的数据库来使用就行了。</p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>ES 本质上是一个支持全文搜索的分布式内存数据库，特别适合用于构建搜索系统。ES 之所以能有非常好的全文搜索性能，最重要的原因就是采用了倒排索引。倒排索引是一种特别为搜索而设计的索引结构，倒排索引先对需要索引的字段进行分词，然后以分词为索引组成一个查找树，这样就把一个全文匹配的查找转换成了对树的查找，这是倒排索引能够快速进行搜索的根本原因。</p> <p>但是，倒排索引相比于一般数据库采用的 B 树索引，它的写入和更新性能都比较差，因此倒排索引也只是适合全文搜索，不适合更新频繁的交易类数据。</p> <p>笔者：此文介绍了 倒排索引 为什么这么快，简单的介绍了 es 的存储查询相关知识点，非常简单，这里笔记将不跟着去实践了。</p> <h2 id="思考题"><a href="#思考题" class="header-anchor">#</a> 思考题</h2> <p>我们在电商的搜索框中搜索商品时，它都有一个搜索提示的功能，比如我输入「苹果」还没有点击搜索按钮的时候，搜索框下面会提示「苹果手机」、「苹果 11」、「苹果电脑」这些建议的搜索关键字，请你课后看一下 ES 的文档，想一下，如何用 ES 快速地实现这个搜索提示功能？</p> <p>可以使用 ES 的 <a href="/note-book/elasticsearch-senior/es-high/76-completion-suggest.html">基于 completion suggest 实现搜索提示</a>，它使用的是 <strong>前缀索引</strong> 的方式来完成的匹配。</p> <p>下面是一个较完整的答案：</p> <p>因为用户每输入一个字都可能会发请求查询搜索框中的搜索推荐。所以搜索推荐的请求量远高于搜索框中的搜索。es 针对这种情况提供了 <code>suggestion api</code>，并提供的专门的数据结构应对搜索推荐，性能高于 match，但它应用起来也有局限性，就是只能做 <strong>前缀匹配</strong>。再结合 pinyin 分词器可以做到输入拼音字母就提示中文。如果想做非前缀匹配，可以考虑 Ngram。不过 Ngram 有些复杂，需要开发者自定义分析器。比如有个网址<code>www.geekbang.com</code>，用户可能记不清具体网址了，只记得网址中有 2 个 e，此时用户输入 ee 两个字母也是可以在搜索框提示出这个网址的。以上是我在工作中针对 <strong>前缀搜索推荐</strong> 和 <strong>非前缀搜索推荐</strong> 的实现方案。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/note-book/edit/master/docs/back-end-storage/01/06.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-06-23 06:29:32</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note-book/back-end-storage/01/05.html" class="prev">
        分布式事务：如何保证多个系统间的数据是一致的？
      </a></span> <span class="next"><a href="/note-book/back-end-storage/01/07.html">
        MySQL HA：如何将「删库跑路」的损失降到最低？
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/note-book/assets/js/app.ef31f24d.js" defer></script><script src="/note-book/assets/js/7.a393a8e7.js" defer></script><script src="/note-book/assets/js/51.386949ba.js" defer></script><script src="/note-book/assets/js/104.308420f7.js" defer></script>
  </body>
</html>
