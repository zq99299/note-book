(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{1814:function(s,t,a){"use strict";a.r(t);var e=a(13),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"初步解析-document-的核心元数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初步解析-document-的核心元数据"}},[s._v("#")]),s._v(" 初步解析 document 的核心元数据")]),s._v(" "),e("p",[s._v("初步解析 document 的核心元数据以及图解剖析 index 创建反例")]),s._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#index-元数据"}},[s._v("_index 元数据")])]),e("li",[e("a",{attrs:{href:"#type元数据"}},[s._v("_type元数据")])]),e("li",[e("a",{attrs:{href:"#id元数据"}},[s._v("_id元数据")])])])]),e("p"),s._v(" "),e("ol",[e("li",[e("code",[s._v("_index 元数据")])]),s._v(" "),e("li",[e("code",[s._v("_type元数据")])]),s._v(" "),e("li",[e("code",[s._v("_id元数据")])])]),s._v(" "),e("p",[s._v("插入一条数据查看返回来的元数据信息")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[s._v("PUT /test_index/test_type/"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"test_content"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test test"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n------------ 响应\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_index"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test_index"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test_type"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"result"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"created"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"_shards"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"total"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"successful"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"failed"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"created"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("h2",{attrs:{id:"index-元数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#index-元数据"}},[s._v("#")]),s._v(" "),e("code",[s._v("_index 元数据")])]),s._v(" "),e("p",[s._v("简单说：可以看成是 mysql 中的一个库")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("代表一个 document 存放在哪个 index 中")])]),s._v(" "),e("li",[e("p",[s._v("类似的数据放在一个索引，非类似的数据放不同索引")]),s._v(" "),e("p",[s._v("product index（包含了所有的商品），")]),s._v(" "),e("p",[s._v("sales index（包含了所有的商品销售数据），")]),s._v(" "),e("p",[s._v("inventory index（包含了所有库存相关的数据）。")]),s._v(" "),e("p",[s._v("如果你把 product，sales，human resource（employee），全都放在一个大的 index 里面，比如说 company index，不合适的。")])]),s._v(" "),e("li",[e("p",[s._v("index 中包含了很多类似的 document")]),s._v(" "),e("p",[s._v("类似是什么意思?")]),s._v(" "),e("p",[s._v("其实指的就是说，这些 document 的 fields 很大一部分是相同的，你说你放了 3个 document，每个 document 的 fields 都完全不一样，这就不是类似了，就不太适合放到一个index里面去了。\n大致上的意思就是：在查询不相关数据的时候，相同 index 下所占用的资源是共享的，不相关的资源访问的时候就会影响它的访问（当然是在数据量很大的情况下容易感受到这种性能情况）")])]),s._v(" "),e("li",[e("p",[s._v("索引名称必须是小写的，不能用下划线开头，不能包含逗号；如：product，website，blog 都可以")])])]),s._v(" "),e("p",[s._v("下面图解不类似的情况下出现的性能问题")]),s._v(" "),e("p",[e("img",{attrs:{src:a(993),alt:""}})]),s._v(" "),e("h2",{attrs:{id:"type元数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#type元数据"}},[s._v("#")]),s._v(" "),e("code",[s._v("_type元数据")])]),s._v(" "),e("p",[s._v("简单说：可以看成是 mysql 一个库中的表")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("代表 document 属于 index 中的哪个类别（type）")])]),s._v(" "),e("li",[e("p",[s._v("一个索引通常会划分为多个 type，逻辑上对 index 中有些许不同的几类数据进行分类")]),s._v(" "),e("p",[s._v("因为一批相同的数据，可能有很多相同的 fields，但是还是可能会有一些轻微的不同，可能会有少数 fields 是不一样的，举个例子，就比如说，商品，可能划分为电子商品，生鲜商品，日化商品，等等。")])]),s._v(" "),e("li",[e("p",[s._v("type 名称可以是大写或者小写，但是同时不能用下划线开头，不能包含逗号")])])]),s._v(" "),e("h2",{attrs:{id:"id元数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#id元数据"}},[s._v("#")]),s._v(" "),e("code",[s._v("_id元数据")])]),s._v(" "),e("ol",[e("li",[s._v("代表 document 的唯一标识，与 index 和 type 一起，可以唯一标识和定位一个 document")]),s._v(" "),e("li",[s._v("我们可以手动指定 document 的 id（put /index/type/id），也可以不指定，由 es 自动为我们创建一个 id")])])])}),[],!1,null,null,null);t.default=n.exports},993:function(s,t,a){s.exports=a.p+"assets/img/markdown-img-paste-20190101155232556.43343a7e.png"}}]);