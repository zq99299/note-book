(window.webpackJsonp=window.webpackJsonp||[]).push([[524],{1990:function(s,t,n){"use strict";n.r(t);var a=n(13),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"储藏与清理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#储藏与清理"}},[s._v("#")]),s._v(" 储藏与清理")]),s._v(" "),n("p",[s._v("有时，当你在项目的一部分上 "),n("strong",[s._v("已经工作一段时间后")]),s._v("，"),n("strong",[s._v("所有东西都进入了混乱的状态")]),s._v("，而 "),n("strong",[s._v("这时你想要切换到另一个分支做一点别的事情")]),s._v("。 问题是，"),n("strong",[s._v("你不想仅仅因为过会儿回到这一点而为做了一半的工作创建一次提交")]),s._v("。 针对这个问题的答案是 "),n("code",[s._v("git stash")]),s._v(" 命令。")]),s._v(" "),n("p",[n("strong",[s._v("储藏会处理工作目录的脏的状态")]),s._v(" – 即，"),n("strong",[s._v("修改的跟踪文件")]),s._v(" 与 "),n("strong",[s._v("暂存改动")]),s._v(" – 然后将未完成的修改 "),n("strong",[s._v("保存到一个栈上")]),s._v("，而你可以在任何时候重新应用这些改动。")]),s._v(" "),n("p",[s._v("注意：储藏的是 "),n("strong",[s._v("被跟踪的文件")]),s._v("，也就是说，你的文件状态是新增的未被跟踪的文件是不会被储藏的，如下面这样的")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\nOn branch master\nYour branch and "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'origin/master'")]),s._v(" have diverged,\nand have "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" and "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" different commits each, respectively.\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git pull"')]),s._v(" to merge the remote branch into yours"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nChanges to be committed:\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git restore --staged <file>..."')]),s._v(" to unstage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        modified:   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个修改的文件会被储藏")]),s._v("\n\nUntracked files: "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未跟踪的文件")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git add <file>..."')]),s._v(" to include "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" what will be committed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".txt\t\t\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个文件是新增的，这样的是不会被 stash 储藏的")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[s._v("这个是不带参数的储藏，后面讲解带参数的储藏，就会改变这种默认的作用")]),s._v(" "),n("h2",{attrs:{id:"储藏工作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#储藏工作"}},[s._v("#")]),s._v(" 储藏工作")]),s._v(" "),n("p",[s._v("为了演示，"),n("strong",[s._v("进入项目并改动几个文件")]),s._v("，然后 "),n("strong",[s._v("可能暂存其中的一个改动")]),s._v("。 如果运行 "),n("code",[s._v("git status")]),s._v("，可以看到有改动的状态：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\nChanges to be committed:\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git reset HEAD <file>..."')]),s._v(" to unstage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\tmodified:   index.html\n\nChanges not staged "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" commit:\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git add <file>..."')]),s._v(" to update what will be committed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git checkout -- <file>..."')]),s._v(" to discard changes "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" working directory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\tmodified:   lib/simplegit.rb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("strong",[s._v("现在想要切换分支")]),s._v("，"),n("strong",[s._v("但是还不想要提交之前的工作")]),s._v("；所以储藏修改。 将新的储藏推送到栈上，运行 "),n("code",[s._v("git stash")]),s._v("  或  "),n("code",[s._v("git stash save")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash\nSaved working directory and index state "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"WIP on master: 049d078 added the index file"')]),s._v("\nHEAD is now at 049d078 added the index "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("To restore them "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("type")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git stash apply"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("工作目录是干净的了：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# On branch master")]),s._v("\nnothing to commit, working directory clean\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("在这时，你能够轻易地切换分支并在其他地方工作")]),s._v("；你的修改被存储在栈上。 要查看储藏的东西，可以使用 "),n("code",[s._v("git stash list")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash list\nstash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": WIP on master: 049d078 added the index "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\nstash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": WIP on master: c264051 Revert "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"added file_size"')]),s._v("\nstash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": WIP on master: 21d80a5 added number to log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("在本例中，有两个之前做的储藏，所以你接触到了三个不同的储藏工作。 可以通过原来 "),n("code",[s._v("stash")]),s._v("  命令的帮助提示中的命令将你刚刚储藏的工作重新应用："),n("code",[s._v("git stash apply")]),s._v("。 如果想要应用其中一个更旧的储藏，可以通过名字指定它，像这样："),n("code",[s._v("git stash apply stash@{2}")]),s._v("。 "),n("strong",[s._v("如果不指定一个储藏，Git 认为指定的是最近的储藏")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash apply\nOn branch master\nChanged but not updated:\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git add <file>..."')]),s._v(" to update what will be committed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n      modified:   index.html\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意看这里， stash 前是被 add 暂存了的，这里变成了未暂存")]),s._v("\n      modified:   lib/simplegit.rb\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("可以看到 Git 重新修改了当你保存储藏时撤消的文件。 在本例中，"),n("strong",[s._v("当尝试应用储藏时有一个干净的工作目录，并且尝试将它应用在保存它时所在的分支")]),s._v("；但是有一个干净的工作目录与应用在同一分支并不是成功应用储藏的充分必要条件。 "),n("strong",[s._v("可以在一个分支上保存一个储藏")]),s._v("，"),n("strong",[s._v("切换到另一个分支，然后尝试重新应用这些修改")]),s._v("。 当应用储藏时工作目录中也可以有修改与未提交的文件 –  "),n("strong",[s._v("如果有任何东西不能干净地应用，Git 会产生合并冲突")]),s._v("。")]),s._v(" "),n("p",[n("strong",[s._v("文件的改动被重新应用了，但是之前暂存的文件却没有重新暂存")]),s._v("。 想要那样的话，必须使用 "),n("code",[s._v("–index")]),s._v(" 选项来运行  "),n("code",[s._v("git stash apply")]),s._v(" 命令，"),n("strong",[s._v("来尝试重新应用暂存的修改")]),s._v("。 如果已经那样做了，那么你将回到原来的位置：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash apply --index\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在应用暂存的时候，使用 --index 命令尝试重新应用暂存的修改")]),s._v("\n On branch master\n Changes to be committed:\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git reset HEAD <file>..."')]),s._v(" to unstage"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n      modified:   index.html\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注意看这里，与不加 --index 参数的命令不一致的表现")]),s._v("\n\n Changed but not updated:\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git add <file>..."')]),s._v(" to update what will be committed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n      modified:   lib/simplegit.rb\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[n("strong",[s._v("应用选项只会尝试应用暂存的工作")]),s._v(" – "),n("strong",[s._v("在堆栈上还有它")]),s._v("。 可以运行 "),n("code",[s._v("git stash drop")]),s._v(" 加上将要移除的储藏的名字来移除它：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash list\nstash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": WIP on master: 049d078 added the index "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\nstash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": WIP on master: c264051 Revert "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"added file_size"')]),s._v("\nstash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(": WIP on master: 21d80a5 added number to log\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash drop stash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nDropped stash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("364e91f3f268f0900bc3ee613f9f733e82aaed43"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("也可以运行 "),n("code",[s._v("git stash pop")]),s._v(" "),n("strong",[s._v("来应用储藏然后立即从栈上扔掉它")]),s._v("。")]),s._v(" "),n("h3",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),n("ul",[n("li",[s._v("stash 或 stash save：储藏工作目录中 "),n("strong",[s._v("修改的跟踪文件")]),s._v(" 与 "),n("strong",[s._v("暂存改动")])]),s._v(" "),n("li",[s._v("stash list：查看储藏列表")]),s._v(" "),n("li",[s._v("stash apply：应用最近一个储藏或指定储藏")]),s._v(" "),n("li",[s._v("stash drop：删除一个储藏")]),s._v(" "),n("li",[s._v("stash pop：应用并删除一个储藏")])]),s._v(" "),n("h2",{attrs:{id:"创造性的储藏"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#创造性的储藏"}},[s._v("#")]),s._v(" 创造性的储藏")]),s._v(" "),n("p",[s._v("有几个储藏的 "),n("strong",[s._v("变种")]),s._v(" 可能也很有用。 第一个非常流行的选项是 "),n("code",[s._v("stash save")]),s._v("  命令的 "),n("code",[s._v("–keep-index")]),s._v("  选项。 它 "),n("strong",[s._v("告诉 Git 不要储藏任何你通过 git add 命令已暂存的东西")]),s._v("。")]),s._v(" "),n("p",[n("strong",[s._v("当你做了几个改动并只想提交其中的一部分，过一会儿再回来处理剩余改动时，这个功能会很有用")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status -s\nM  index.html\n M lib/simplegit.rb\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash --keep-index\nSaved working directory and index state WIP on master: 1b65b17 added the index "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\nHEAD is now at 1b65b17 added the index "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status -s\nM  index.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("另一个经常使用储藏来做的事情是 "),n("strong",[s._v("像储藏跟踪文件一样储藏未跟踪文件")]),s._v("。 默认情况下，"),n("code",[s._v("git stash")]),s._v(" "),n("strong",[s._v("只会储藏已经在索引中的文件")]),s._v("。 如果指定 "),n("code",[s._v("–include-untracked")]),s._v("  或 "),n("code",[s._v("-u")]),s._v("  标记，"),n("strong",[s._v("Git 也会储藏任何创建的未跟踪文件")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status -s\nM  index.html\n M lib/simplegit.rb\n?? new-file.txt\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash -u\nSaved working directory and index state WIP on master: 1b65b17 added the index "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\nHEAD is now at 1b65b17 added the index "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status -s\n$\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("最终，如果指定了 "),n("code",[s._v("–patch")]),s._v("  标记，"),n("strong",[s._v("Git 不会储藏所有修改过的任何东西")]),s._v("，"),n("strong",[s._v("但是会交互式地提示哪些改动想要储藏、哪些改动需要保存在工作目录中")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash --patch\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("diff")]),s._v(" --git a/lib/simplegit.rb b/lib/simplegit.rb\nindex 66d332e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("8bb5674 "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("100644")]),s._v("\n--- a/lib/simplegit.rb\n+++ b/lib/simplegit.rb\n@@ -16,6 +16,10 @@ class SimpleGit\n         "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("return")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#{git_cmd} 2>&1")]),n("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(".chomp\n       end\n     end\n+\n+    def show"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("treeish "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n+      command"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git show #{treeish}"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n+    end\n\n end\n "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\nStash this hunk "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("y,n,q,a,d,/,e,?"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("? y\n\nSaved working directory and index state WIP on master: 1b65b17 added the index "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("h3",{attrs:{id:"小结-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结-2"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),n("ul",[n("li",[n("p",[n("code",[s._v("stash --keep-index")]),s._v("：跳过暂存的东西")]),s._v(" "),n("p",[s._v("不要储藏任何你通过 "),n("code",[s._v("git add")]),s._v(" 命令已暂存的东西")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("stash --include-untracked")]),s._v(" 或 "),n("code",[s._v("stash -u")]),s._v("：储藏时把未跟踪的文件也一起储藏")])]),s._v(" "),n("li",[n("p",[n("code",[s._v("stash --patch")])]),s._v(" "),n("p",[s._v("Git 不会储藏所有修改过的任何东西**，**但是会交互式地提示哪些改动想要储藏、哪些改动需要保存在工作目录中")])])]),s._v(" "),n("h2",{attrs:{id:"从储藏创建一个分支"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#从储藏创建一个分支"}},[s._v("#")]),s._v(" 从储藏创建一个分支")]),s._v(" "),n("p",[s._v("如果 "),n("strong",[s._v("储藏了一些工作")]),s._v("，将它留在那儿了一会儿，然后 "),n("strong",[s._v("继续在储藏的分支上工作")]),s._v("，"),n("strong",[s._v("在重新应用工作时可能会有问题")]),s._v("。 如果应用尝试修改刚刚修改的文件，你会得到一个合并冲突并不得不解决它。 如果想要一个轻松的方式来再次测试储藏的改动，可以运行 "),n("code",[s._v("git stash branch")]),s._v(" "),n("strong",[s._v("创建一个新分支，检出储藏工作时所在的提交，重新在那应用工作，然后在应用成功后扔掉储藏：")])]),s._v(" "),n("p",[s._v("可以如下炮制这个场景：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改其中第 2 行")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 储藏起来")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash\nSaved working directory and index state WIP on testc: e3ec771 u1\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 现在工作目录是干净的了")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\nOn branch testc\nnothing to commit, working tree clean\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改其中第 2 行内容")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 尝试应用储藏 e3ec771 ")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash pop\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 您对以下文件的本地更改将被合并覆盖。")]),s._v("\nerror: Your "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" changes to the following files would be overwritten by merge:\n        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 请在合并前提交您的修改或将其储藏起来。 ")]),s._v("\nPlease commit your changes or stash them before you merge.\nAborting  "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 此次应用储藏被终止")]),s._v("\nThe stash entry is kept "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" you need it again. \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 那么我们就先将修改的提交")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -am "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'u2'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("testc 294f1db"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" u2\n "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" changed, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" insertion"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("+"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" deletion"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工作目录是干净的了")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\nOn branch testc\nnothing to commit, working tree clean\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再次尝试应用储藏")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash pop\nAuto-merging "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自动合并 1.txt 文件")]),s._v("\nCONFLICT "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": Merge conflict "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 但是合并失败了")]),s._v("\nThe stash entry is kept "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" you need it again. "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 储藏没有被删除，被保留了起来")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 现在需要手动的处理这个冲突")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n\nx\n\nruby-client\n\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" Updated upstream   "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 手动处理这个冲突")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1233")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" Stashed changes\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 处理冲突后，再暂存起来")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br")])]),n("p",[s._v("可以看到如上的储藏应用，太麻烦了")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改其中第 2 行")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 储藏起来")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash\nSaved working directory and index state WIP on testc: e3ec771 u1\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 现在工作目录是干净的了")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status\nOn branch testc\nnothing to commit, working tree clean\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改其中第 2 行内容")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#============================= 在这之前都是来炮制一个这样的场景")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接下来，需要先提交我们后来的这次改动")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -am "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'u3'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("master 854b9a4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" u3\n "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" changed, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" insertion"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("+"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" deletion"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后从储藏中创建一个分支进行应用，这样就不会导致和我们之前的 U3 改动进行冲突")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" stash branch testchanges\nSwitched to a new branch "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'testchanges'")]),s._v("\nOn branch testchanges\nChanges not staged "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" commit:\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git add <file>..."')]),s._v(" to update what will be committed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git restore <file>..."')]),s._v(" to discard changes "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" working directory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        modified:   "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\n\nno changes added to commit "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git add"')]),s._v(" and/or "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git commit -a"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDropped refs/stash@"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e22d04bfd0b34518550d7ca2286690b32b1f181c"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch\n  master\n* testchanges\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到在新的分支上了")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果还想要这个储藏的改动，就需要先提交，再合并会原来的分支")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -am "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'u2'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("testchanges ee3861b"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" u2\n "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" changed, "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" insertion"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("+"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" deletion"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("-"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\nSwitched to branch "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'master'")]),s._v("\nYour branch and "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'origin/master'")]),s._v(" have diverged,\nand have "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" and "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" different commits each, respectively.\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("use "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"git pull"')]),s._v(" to merge the remote branch into yours"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不过在合并的时候还是会产生冲突，还是需要自己手动合并")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge testchanges\nAuto-merging "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\nCONFLICT "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": Merge conflict "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".txt\nAutomatic merge failed"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" fix conflicts and "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v(" commit the result.\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br")])]),n("p",[s._v("但是对于恢复储藏来说，这是在新分支轻松恢复储藏工作并继续工作的一个很不错的途径。")]),s._v(" "),n("h2",{attrs:{id:"清理工作目录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#清理工作目录"}},[s._v("#")]),s._v(" 清理工作目录")]),s._v(" "),n("p",[s._v("对于工作目录中一些工作或文件，你想做的也许不是储藏而是移除。 "),n("code",[s._v("git clean")]),s._v(" 命令会帮你做这些事。")]),s._v(" "),n("p",[s._v("有一些通用的原因比如说 "),n("strong",[s._v("为了移除由合并或外部工具生成的东西")]),s._v("，或是 "),n("strong",[s._v("为了运行一个干净的构建而移除之前构建的残留")]),s._v("。")]),s._v(" "),n("p",[n("strong",[s._v("你需要谨慎地使用这个命令")]),s._v("，因为它 "),n("strong",[s._v("被设计为从工作目录中移除未被追踪的文件")]),s._v("。 如果你改变主意了，你也不一定能找回来那些文件的内容。 一个更安全的选项是运行  "),n("code",[s._v("git stash –all")]),s._v("  来移除每一样东西并存放在栈中。")]),s._v(" "),n("p",[s._v("你可以使用 "),n("code",[s._v("git clean")]),s._v(" 命令去除冗余文件或者清理工作目录。 使用 "),n("code",[s._v("git clean -f -d")]),s._v(" 命令来移除工作目录中所有未追踪的文件以及空的子目录。"),n("code",[s._v("-f")]),s._v("  意味着 "),n("em",[s._v("强制")]),s._v(" 或  “确定移除” 。")]),s._v(" "),n("p",[s._v("如果只是想要看看它会做什么，可以使用 "),n("code",[s._v("-n")]),s._v("  选项来运行命令，这意味着 「"),n("strong",[s._v("做一次演习然后告诉你 "),n("em",[s._v("将要")]),s._v(" 移除什么")]),s._v("」。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clean -d -n\nWould remove test.o\nWould remove tmp/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("默认情况下，"),n("code",[s._v("git clean")]),s._v("  命令只会移除没有忽略的未跟踪文件")]),s._v("。 任何与 "),n("code",[s._v(".gitiignore")]),s._v("  或其他忽略文件中的模式匹配的文件都不会被移除。 如果你也想要移除那些文件，例如为了做一次完全干净的构建而移除所有由构建生成的 "),n("code",[s._v(".o")]),s._v("  文件，可以给 clean 命令增加一个 "),n("code",[s._v("-x")]),s._v("  选项。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" status -s\n M lib/simplegit.rb\n?? build.TMP\t\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 未被跟踪的文件")]),s._v("\n?? tmp/\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clean -n -d\nWould remove build.TMP\nWould remove tmp/\n\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clean -n -d -x\nWould remove build.TMP\nWould remove test.o "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这个文件是 gitiignore 忽略的文件，使用 -x 也可以删除掉")]),s._v("\nWould remove tmp/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[n("strong",[s._v("如果不知道 git clean 命令将会做什么")]),s._v("，在将 "),n("code",[s._v("-n")]),s._v("  改为 "),n("code",[s._v("-f")]),s._v("  来真正做之前总是先用 "),n("code",[s._v("-n")]),s._v("  来运行它做双重检查。 另一个小心处理过程的方式是使用 "),n("code",[s._v("-i")]),s._v("  或  "),n("code",[s._v("interactive")]),s._v(" 标记来运行它。")]),s._v(" "),n("p",[s._v("这将会以交互模式运行 clean 命令。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clean -x -i\nWould remove the following items:\n  build.TMP  test.o\n*** Commands ***\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(": clean                "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(": filter by pattern    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" by numbers    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(": ask each             "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(": quit\n    "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(": "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v("\nWhat now"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("这种方式下可以分别地检查每一个文件或者交互地指定删除的模式。")])])}),[],!1,null,null,null);t.default=e.exports}}]);